{"version":3,"file":"onSubmitFn-f28b94ca.js","sources":["../../stories/Table/onSubmitFn.ts"],"sourcesContent":["import { ActionCrud, TableRef } from \"../../src\"\nimport { GeneratedData, createData, deleteData, updateData } from \"../../test/mock\"\n\nexport const onSubmitFn = (data: Partial<GeneratedData>, action: ActionCrud, tableRef: TableRef | null): Promise<Partial<any> | null> => {\n    console.log('onSubmitFn-data', data)\n    console.log('onSubmitFn-action', action)\n    return new Promise((resolve, reject) => {\n        tableRef?.setIsLoadingModal(true)\n\n        const actionFn = () => {\n\n            if (action === 'create') {\n                return createData(data, 230)\n            }\n\n            if (action === 'edit') {\n                return updateData(data, 230)\n            }\n\n            if (action === 'delete') {\n                if (!data.uuid) return Promise.reject('uuid is required')\n                return deleteData(data.uuid, 230)\n            }\n\n            return Promise.reject('Action not found')\n        }\n\n        actionFn()\n            .then(() => {\n                tableRef?.setShowModal(false)\n                tableRef?.refreshTable()\n                resolve(null)\n            })\n            .catch((err) => {\n                reject(err)\n            })\n            .finally(() => {\n                tableRef?.setIsLoadingModal(false)\n            })\n\n    })\n}\n"],"names":["onSubmitFn","data","action","tableRef","resolve","reject","createData","updateData","deleteData","err"],"mappings":"uFAGO,MAAMA,EAAa,CAACC,EAA8BC,EAAoBC,KACjE,QAAA,IAAI,kBAAmBF,CAAI,EAC3B,QAAA,IAAI,oBAAqBC,CAAM,EAChC,IAAI,QAAQ,CAACE,EAASC,IAAW,CACpCF,GAAA,MAAAA,EAAU,kBAAkB,KAEX,IAETD,IAAW,SACJI,EAAWL,EAAM,GAAG,EAG3BC,IAAW,OACJK,EAAWN,EAAM,GAAG,EAG3BC,IAAW,SACND,EAAK,KACHO,EAAWP,EAAK,KAAM,GAAG,EADT,QAAQ,OAAO,kBAAkB,EAIrD,QAAQ,OAAO,kBAAkB,GAGnC,EACJ,KAAK,IAAM,CACRE,GAAA,MAAAA,EAAU,aAAa,IACvBA,GAAA,MAAAA,EAAU,eACVC,EAAQ,IAAI,CAAA,CACf,EACA,MAAOK,GAAQ,CACZJ,EAAOI,CAAG,CAAA,CACb,EACA,QAAQ,IAAM,CACXN,GAAA,MAAAA,EAAU,kBAAkB,GAAK,CACpC,CAAA,CAER"}